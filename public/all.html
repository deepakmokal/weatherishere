<html>

<head>
    <title>All</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
    <p class="text-info m-3">Total count: <span id='count'></span></p>

    <script>
        getData();
        async function getData() {
            const response = await fetch('/api');
            const data = await response.json();

             const len = Object.keys(data).length;
             document.getElementById('count').textContent = len;
            // // console.log('Total count:' +len);
            
            for (item of data) {
                //bootstrap card
                const panel = document.createElement('div');
                panel.setAttribute('class', 'card  m-3')

                //card-header with ID
                const panel_head = document.createElement('div');
                panel_head.setAttribute('class', 'card-header text-light bg-primary');
                panel_head.textContent = `id: ${item._id}`;



                const panel_body = document.createElement('div');
                panel_body.setAttribute('class', 'card-body');
                panel_body.textContent = `Location: ${item.latitude}, ${item.longitude}`


                const panel_footer = document.createElement('div');
                panel_footer.setAttribute('class', 'card-footer');
                const dateString = new Date(item.timestamp).toLocaleString();
                panel_footer.textContent = `Date: ${dateString}`

                //appending Childs
                panel.append(panel_head, panel_body, panel_footer);
                document.body.append(panel);

            }
            console.log(data);
        }
    </script>

   
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>